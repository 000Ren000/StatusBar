
# Индикатор (Статус бар)  


## Предназначен для отображения процесса выполнения обработки на сервере 



## Код Общего модуля
//Ант_МойОбщийМодуль.ПерепроведениеДокументов

Процедура ПерепроведениеДокументов(Параметры, АдресРезультата = Неопределено) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	РеализацияТоваровУслуг.Ссылка КАК Ссылка
		|ИЗ
		|	Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
		|ГДЕ
		|	РеализацияТоваровУслуг.Дата МЕЖДУ &ДатаНачала И &ДатаОкончания";
	
	Запрос.УстановитьПараметр("ДатаНачала", Параметры.ДатаНачала);
	Запрос.УстановитьПараметр("ДатаОкончания", Параметры.ДатаОкончания);
	
	СписокДокументов = Запрос.Выполнить().Выгрузить();
	
	ТекДок = 1;
 	ВсегоДокументов = СписокДокументов.Количество();
	
	Для Каждого СсылкаДокумента Из СписокДокументов Цикл
		
		Документ = СсылкаДокумента.Ссылка.ПолучитьОбъект();
		
		Документ.Проведен = Ложь;
		Документ.ПометкаУдаления = Ложь;
		
		Попытка
			Документ.Записать(РежимЗаписиДокумента.Проведение, РежимПроведенияДокумента.Неоперативный);
		Исключение    
			Документ.Комментарий = "Документ не провелся";
			Документ.Записать(РежимЗаписиДокумента.Запись);
		КонецПопытки;
		
		ПроцентВыполнения = Окр((ТекДок / ВсегоДокументов) * 100, 0);
		
		
		// сообщаем "процент" и "текст сообщения"
		ДлительныеОперации.СообщитьПрогресс(ПроцентВыполнения, 
		СтрШаблон("Проведено %1 из %2  Документ: %3",  
			ТекДок,ВсегоДокументов,СокрЛП(Документ.Ссылка)));
		
		ТекДок = ТекДок + 1;
	КонецЦикла;
	

	
КонецПроцедуры
